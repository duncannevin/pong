<!DOCTYPE html>
</body>
</html>
<html lang="en">
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	    <title>Pong</title>
		<!-- lodash plugin -->
		<script src="lodash.js"></script>
		<!-- jquery plugin -->
		<script src="jquery-3.1.1.js"></script>
		<!-- normalize the css -->
		<style src="normalize.css"></style>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<style>
			html, body, .container{
				height: 100%;
				width: 100%;
				padding: 0;
			}
			.container{
				text-align: center;
			}
			#table{
				display: inline;
				margin-top: 10em;
			}
		</style>
		<!-- makes page able to work on phones -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	<body>
		<nav class="navbar navbar-inverse navbar-fixed-top">
	      <div class="container">
	        <div class="navbar-header">
	          <a class="navbar-brand" href="#">Pong</a>
	        </div>
	       </div><!--/.nav-collapse -->
    	</nav>

	    <div class="container">
			<canvas id="table" height="700" width="1000"></canvas>
	    </div><!-- /.container -->
		<!-- Latest compiled and minified JavaScript-->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script>

	(() => {
		let c = document.getElementById('table');
		let ctx = c.getContext('2d');

		//global object to track top/left coordinates...
		let coords = {};
		coords.left = [0, 300];
		coords.right = [980, 300];
		coords.ball = [0, 0];

		//Functions for loading board and the ball...
		class Game{
			constructor() {

				let score;
				let directionX = 2;
				let directionY = 0.05;
				let ball = [50, 350];
				let coords = {};
				coords.left = [0, 300];
				coords.right = [980, 300];

				//keeps a copy of the paddles locations in closure...
				this.pLocation = (loc, player) => {
					coords[player] = loc;
				};

				//draw board with canvas...
				this.board = (x, y, w, h) => {
					// draw a table border...
					ctx.beginPath();
					ctx.rect(x, y, w, h);//x, y->top left corner, width height.
					ctx.fillStyle = 'rgb(157, 157, 157)';
					ctx.fill();
					//draw net...
					ctx.strokeRect(499, 0, 2, 700);
					//drawing length wise center line...
					ctx.beginPath();
					ctx.moveTo(20, 350);
					ctx.lineTo(980, 350);
					ctx.stroke();
				};

				//write a function that creates the ball...
				this.drawBall = (x, y) => {//x, y params allow the user to move the paddles.
					//erases old ball...
					this.board(20, 20, 960, 660);
					//draws ball...
					ctx.beginPath();
					//center=(x, y) radius=30 angle=(0, 7)
					ctx.arc(x, y, 30, 0, 7);
					ctx.fillStyle = 'rgb(34, 34, 34)';
					ctx.fill();
					ctx.closePath();
				};

				//function that adjusts the balls coordinates...
				this.ballCoordinates = () => {
					ball = ball || coords.left.map((val) => {return val + 50});
					ball[0] += directionX;
					ball[1] += directionY;
				};

				//function that moves the ball...
				this.moveBall = () => {

					let whoHit = 'left';
					//function adjusts the direction of the ball based on where it hits the paddle...
					let a = () => {
						if(ball[1] >= coords[whoHit][1] && ball[1] < coords[whoHit][1] + 33){
							directionY = -0.15
							return;
						}
						if(ball[1] <= coords[whoHit][1] + 100 && ball[1] > coords[whoHit][1] + 77){
							directionY = +0.15
							return;
						}
						directionY = -directionY;
					};
					//adjust call coordinates...
					this.ballCoordinates();
					//draw the ball...
					this.drawBall(ball[0], ball[1]);
					if(ball[0] === coords.right[0] - 30 && ball[1] < coords.right[1] + 100 && ball[1] > coords.right[1]){
						whoHit = 'right';
						directionX = -directionX;
						a();
					}
					if(ball[0] === coords.left[0] + 50 && ball[1] < coords.left[1] + 100 && ball[1] > coords.left[1]){
						whoHit = 'left';
						directionX = -directionX;
						a();
					}
				};
			};
		}

		//functions pertaining to the individual pleyers, ie paddles...
		class Paddles{
			constructor(player, n, s) {//up === keycode for up, down === keycode for down.

				let up, down, dir;//up=keycode for up//down=keycode for down//dir=direction the paddle is moving.

				//sets the appropriate keycode...
				(function() {
					up = n;
					down = s;
				})()

				//write a function that contains the paddles...
				this.paddle = (x, y, direction) => {//x, y params allow the user to move the paddles.
					//conditional that deletes the existing paddle each iteration...
					if(direction === 'up'){
						ctx.clearRect(x, y+40, 20, 100);
					}else if(direction === 'down'){
						ctx.clearRect(x, y-40, 20, 100);
					}
					//draws paddle...
					ctx.beginPath();
					ctx.rect(x, y, 20, 100);
					ctx.fillStyle = 'rgb(34, 34, 34)';
					ctx.fill();
				};

				//adjust the coordinates each time the paddle is moved...
				this.adjustCoords = (direction) => {
					//getting the direction of to adjust the coordinates based on the key code...
					//if direction is x and coors[1] is correct....
					//also makes sure the paddles cannot leave the edge of the board...
					if(direction === 65 && coords[player][1] > 0 || direction === 76 && coords[player][1] > 0){
						coords[player][1] -= 40;
						dir = 'up';
					}else if(direction === 90 && coords[player][1] < 620 || direction === 188 && coords[player][1] < 620){
						coords[player][1] += 40;
						dir = 'down';
					}
				};

				this.moveP = (event) => {

					let newCoords;

					if(event.keyCode === up || event.keyCode === down){
						newCoords = this.adjustCoords(event.keyCode);//change coordinates.
						this.paddle(coords[player][0], coords[player][1], dir);//moves paddle based on new coordinates.
					}
				};

				this.returnCoords = () => {
					return coords[player];
				};
			};
		}

		//game...
		let game = new Game();
		game.board(20, 20, 960, 660);
		setInterval(game.moveBall, 1);
		//end//

		//left player...
		let left = new Paddles('left', 65, 90);
		left.paddle.apply(this, coords.left);
		game.pLocation(left.returnCoords());
		//end//

		//right player...
		let right = new Paddles('right', 76, 188);
		right.paddle.apply(this, coords.right);
		game.pLocation(left.returnCoords());
		//end//

		//event listeners...
		//looks for up and down keys to be pressed for each side...
		document.addEventListener('keydown', (event) => {
			if(event.keyCode === 65 || event.keyCode === 90){
				left.moveP(event);
				game.pLocation(left.returnCoords(), 'left');
			}
			if(event.keyCode === 76 || event.keyCode === 188){
				right.moveP(event);
				game.pLocation(right.returnCoords(), 'right');
			}
		});
		//end//


	})(window)


		</script>
	</body>
</html>






















